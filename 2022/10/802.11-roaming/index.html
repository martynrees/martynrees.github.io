<!DOCTYPE html>
<html lang="en-us" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>802.11 Roaming | Boldly Going Nowhere</title>
<meta name="keywords" content="Wireless">
<meta name="description" content="What is 802.11r roaming and why is is so important to users (and you)? Wireless roaming is an essential feature for any wireless network, especially for those that are deployed in large, multi-building environments such as universities, hospitals, and campus networks. A simplified explanation is that &ldquo;802.11 roaming refers to the process by which a wireless client device seamlessly transitions between different access points (APs) or base stations within a wireless network while maintaining an uninterrupted connection.">
<meta name="author" content="">
<link rel="canonical" href="https://martynrees.github.io/2022/10/802.11-roaming/">
<link crossorigin="anonymous" href="https://martynrees.github.io/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://martynrees.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://martynrees.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://martynrees.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://martynrees.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://martynrees.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en-us" href="https://martynrees.github.io/2022/10/802.11-roaming/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  
    
      
    
  

<meta property="og:title" content="802.11 Roaming" />
<meta property="og:description" content="What is 802.11r roaming and why is is so important to users (and you)? Wireless roaming is an essential feature for any wireless network, especially for those that are deployed in large, multi-building environments such as universities, hospitals, and campus networks. A simplified explanation is that &ldquo;802.11 roaming refers to the process by which a wireless client device seamlessly transitions between different access points (APs) or base stations within a wireless network while maintaining an uninterrupted connection." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://martynrees.github.io/2022/10/802.11-roaming/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-10-10T16:28:49+10:30" />
<meta property="article:modified_time" content="2022-10-10T16:28:49+10:30" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="802.11 Roaming"/>
<meta name="twitter:description" content="What is 802.11r roaming and why is is so important to users (and you)? Wireless roaming is an essential feature for any wireless network, especially for those that are deployed in large, multi-building environments such as universities, hospitals, and campus networks. A simplified explanation is that &ldquo;802.11 roaming refers to the process by which a wireless client device seamlessly transitions between different access points (APs) or base stations within a wireless network while maintaining an uninterrupted connection."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://martynrees.github.io/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "802.11 Roaming",
      "item": "https://martynrees.github.io/2022/10/802.11-roaming/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "802.11 Roaming",
  "name": "802.11 Roaming",
  "description": "What is 802.11r roaming and why is is so important to users (and you)? Wireless roaming is an essential feature for any wireless network, especially for those that are deployed in large, multi-building environments such as universities, hospitals, and campus networks. A simplified explanation is that \u0026ldquo;802.11 roaming refers to the process by which a wireless client device seamlessly transitions between different access points (APs) or base stations within a wireless network while maintaining an uninterrupted connection.",
  "keywords": [
    "Wireless"
  ],
  "articleBody": "What is 802.11r roaming and why is is so important to users (and you)? Wireless roaming is an essential feature for any wireless network, especially for those that are deployed in large, multi-building environments such as universities, hospitals, and campus networks. A simplified explanation is that “802.11 roaming refers to the process by which a wireless client device seamlessly transitions between different access points (APs) or base stations within a wireless network while maintaining an uninterrupted connection. Roaming is crucial for mobile devices, such as smartphones, laptops, or tablets, as they move within the coverage area of a Wi-Fi network.” The reality is that acheiving this is a hell of a lot harder! BUT we have some standards and nerd knobs that help us to make it a little bit easier. These include:\n802.11r - Fast BSS transition (current common standard, and what we will cover in this post) 802.11k - neighbour lists (for clients that support it) 802.11v - Assisted Roaming (again, for clients that do support it) If roaming isn’t fast and clean, then users will notice, complain, and it will be your job to fix it up. So lets look at how we can get that right in the first place. First, if you haven’t done a proper design, then life WILL be harder, and the corners you cut at the start will cost you later! Considerations around AP placement, power levels, minumum/mandatory data rates, channel widths, which result in the overall cell size can all play a big part in getting roaming right from the start. But like we looked at above, there is also more to it than just the design, and design discussions isn’t the aim of this post.\n802.11r is the current standard for roaming (replacing the previous OKC method, which some legacy devices might still support today, but that’s another topic), and it improves the transition time for clients to move from one AP to the next, without the need for a full re-authentication. The official name is Fast BSS transition, and you guessed it, it’s covered by the 802.11r amendmant. If we have latency sensitive applications, such as voice on the network, then generally these require a sub 150ms roam time in order to avoid packet loss. For deployments like hospitals, it’s critical to get this right, as otherwise it could be the difference between life and death. 802.11r provides two methods for the fast-roaming handshake: over the air (OTA), and over the Distribution System (DS). With this method, the wireless client performs just one initial authentication against the WLAN infrastructure when a connection is established to the first AP, and performs fast-secure roaming while roaming between APs of the same FT mobility domain.\nOver the Air — The client communicates directly with the target AP for authentication with the FT authentication algorithm. Over the DS - The client communicates with the target AP through the current AP, which then exchanges the FT action frames via the controller (in most cases) One important thing to remember as well, is that if the WLAN/SSID is enabled for 802.11r, and a “legacy” client tries to connect to it that does not support .11r, then it will fail to connect. An Adaptive mode is usually available to allow for support of clients that do and don’t support the standard, otherwise a seperate non 11r WLAN/SSID may be required.\nUsing my 9800-CL lab controller to demonstrate, lets have a look at how we can enable FT roaming.\nSelecting our WLAN and taking a look under Security -\u003e Layer 2, we will see that by default FT is disabled. We have the option for selecting Adaptive, or enabled. Whilst you might think that adaptive will give you the best of both worlds, there’s a word of warning, that even with adaptive enabled, some devices that support .11r FT will experience performance issues when adaptive is enabled. Apple devices have been seen to perform poorly for example, and generally like to have FT set to enabled, rather than adaptive. so buyer beware, and test your devices before rolling out to production! Once we have made our selection, we also have the choice to enable OTA or Over the DS FT. All the tests that I’ve seen have shown no better performance of one over the other, so I’ll usually set it to over the DS.\nBe aware that selecting Update and Apply will cause a brief outage on the SSID, so plan accordingly for this, and test thoroughly beforehand!\n",
  "wordCount" : "752",
  "inLanguage": "en-us",
  "datePublished": "2022-10-10T16:28:49+10:30",
  "dateModified": "2022-10-10T16:28:49+10:30",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://martynrees.github.io/2022/10/802.11-roaming/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Boldly Going Nowhere",
    "logo": {
      "@type": "ImageObject",
      "url": "https://martynrees.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://martynrees.github.io/" accesskey="h" title="Boldly Going Nowhere (Alt + H)">Boldly Going Nowhere</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://martynrees.github.io/" title="Home">
                    <span><i class="sidebar-button-icon fa fa-lg fa-home"></i>Home</span>
                </a>
            </li>
            <li>
                <a href="https://martynrees.github.io/tags" title="Tags">
                    <span><i class="sidebar-button-icon fa fa-lg fa-tags"></i>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://martynrees.github.io/#about" title="About">
                    <span><i class="sidebar-button-icon fa fa-lg fa-question"></i>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      802.11 Roaming
    </h1>
    <div class="post-meta"><span title='2022-10-10 16:28:49 +1030 ACDT'>Oct 10, 2022</span>

</div>
  </header> 
  <div class="post-content"><p><strong>What is 802.11r roaming and why is is so important to users (and you)?</strong> <br />
Wireless roaming is an essential feature for any wireless network, especially for those that are deployed in large, multi-building environments such as universities, hospitals, and campus networks. A simplified explanation is that &ldquo;802.11 roaming refers to the process by which a wireless client device seamlessly transitions between different access points (APs) or base stations within a wireless network while maintaining an uninterrupted connection. Roaming is crucial for mobile devices, such as smartphones, laptops, or tablets, as they move within the coverage area of a Wi-Fi network.&rdquo; <br />
The reality is that acheiving this is a hell of a lot harder! BUT we have some standards and nerd knobs that help us to make it a little bit easier. <br />
These include:</p>
<ul>
<li>802.11r - Fast BSS transition (current common standard, and what we will cover in this post)</li>
<li>802.11k - neighbour lists (for clients that support it)</li>
<li>802.11v - Assisted Roaming (again, for clients that do support it)</li>
</ul>
<p>If roaming isn&rsquo;t fast and clean, then users will notice, complain, and it will be your job to fix it up. So lets look at how we can get that right in the first place. <br />
First, if you haven&rsquo;t done a <strong>proper design</strong>, then life <strong>WILL</strong> be harder, and the corners you cut at the start will cost you later! Considerations around AP placement, power levels, minumum/mandatory data rates, channel widths, which result in the overall cell size can all play a big part in getting roaming right from the start. But like we looked at above, there is also more to it than just the design, and design discussions isn&rsquo;t the aim of this post.</p>
<p>802.11r is the current standard for roaming (replacing the previous OKC method, which some legacy devices might still support today, but that&rsquo;s another topic), and it improves the transition time for clients to move from one AP to the next, without the need for a full re-authentication. The official name is Fast BSS transition, and you guessed it, it&rsquo;s covered by the 802.11r amendmant. If we have latency sensitive applications, such as voice on the network, then generally these require a sub 150ms roam time in order to avoid packet loss. For deployments like hospitals, it&rsquo;s critical to get this right, as otherwise it could be the difference between life and death. <br />
802.11r provides two methods for the fast-roaming handshake: over the air (OTA), and over the Distribution System (DS). With this method, the wireless client performs just one initial authentication against the WLAN infrastructure when a connection is established to the first AP, and performs fast-secure roaming while roaming between APs of the same FT mobility domain.</p>
<ul>
<li>Over the Air — The client communicates directly with the target AP for authentication with the FT authentication algorithm.</li>
<li>Over the DS - The client communicates with the target AP through the current AP, which then exchanges the FT action frames via the controller (in most cases)
<img loading="lazy" src="https://martynrees.github.io/img/roaming.jpg" alt="80211r roaming"  />
</li>
</ul>
<p>One important thing to remember as well, is that if the WLAN/SSID is enabled for 802.11r, and a &ldquo;legacy&rdquo; client tries to connect to it that does not support .11r, then it will fail to connect. An Adaptive mode is usually available to allow for support of clients that do and don&rsquo;t support the standard, otherwise a seperate non 11r WLAN/SSID may be required.</p>
<p>Using my 9800-CL lab controller to demonstrate, lets have a look at how we can enable FT roaming.<br />
Selecting our WLAN and taking a look under Security -&gt; Layer 2, we will see that by default FT is disabled.
<img loading="lazy" src="https://martynrees.github.io/img/FT.png" alt="9800 FT"  />

We have the option for selecting Adaptive, or enabled. Whilst you might think that adaptive will give you the best of both worlds, there&rsquo;s a word of warning, that even with adaptive enabled, some devices that support .11r FT will experience performance issues when adaptive is enabled. Apple devices have been seen to perform poorly for example, and generally like to have FT set to enabled, rather than adaptive. so buyer beware, and test your devices before rolling out to production!
<img loading="lazy" src="https://martynrees.github.io/img/FT_enabled.png" alt="9800 FT"  />

Once we have made our selection, we also have the choice to enable OTA or Over the DS FT. All the tests that I&rsquo;ve seen have shown no better performance of one over the other, so I&rsquo;ll usually set it to over the DS.<br />
Be aware that selecting Update and Apply will cause a brief outage on the SSID, so plan accordingly for this, and test thoroughly beforehand!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://martynrees.github.io/tags/wireless/">Wireless</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://martynrees.github.io/">Boldly Going Nowhere</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
